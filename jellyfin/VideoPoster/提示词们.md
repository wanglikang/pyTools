# 步骤
使用Trae完成，模型：DeepSeek-V3-0324

## 第一步
```
重新编写一个python脚本，实现下述的要求：

用户原始的需求，是找出待分析的文件夹及其所有子文件夹内的视频文件对应的封面文件

拆解需求后，可以从以下几步进行

1、扫描目标文件夹及其子文件夹内的所有视频文件，并记录在自定义的class中，记录下视频文件的全路径、文件名

2、扫描目标文件夹及其子文件夹内的所有封面文件，并记录在自定义的class中，记录下封面文件的全路径、文件名

3、根据上面两步扫描的结果，组装一个视频文件的上级目录中、上级目录中的子文件夹（文件夹名字中要有“封面”、“海报”等关键字）内、同级文件夹内所有的封面文件信息，记录在一个新的数据结构里，可以定义一个新的classs

4、针对某一个视频文件，将上一步中记录的所有封面文件，进行匹配，找出最匹配的封面文件的文件名，匹配规则在后面给出

5、输出每一个视频文件最佳匹配的封面文件的全路径，同时将该视频文件对应的所有候选的封面文件也一并输出，注意，需要区别一下最佳匹配的封面文件和其余的封面文件

，在输出的时候，需要将文件、文件夹的层级关系也一并输出出来

6、最后，脚本可以支持传入一个目录参数，作为待分析的根目录入口，若没有传入，则将当前脚本文件所在的目录的上级目录当作根目录传入进行处理

匹配的规则如下：

1、若封面的文件名和视频文件的文件名完全匹配，则是最佳匹配，最高优先级

2、否则，若封面文件的文件名前缀或后缀匹配视频文件的文件名，则也算是匹配到，优先级次之

3、否则，在所有候选的封面文件文件名中，与视频文件的文件名进行关联分析（可以使用difflib.SequenceMatcher 库），找出最优匹配的封面文件。若有多个匹配程度相同的封面文件，则依次取视频文件同级目录、子目录的、父目录、父目录中相邻目录的封面文件
```


## 第二步

```
在VideoPoster目录下，多构造一些测试数据，，包括视频文件、封面文件，需要考虑上面描述中的各种情况
在VIdeoPoster目录中创建对应的目录和文件
```

## 第三步
```
很好，考虑一个新增的需求，每个视频文件的同级目录里，都有一个同名的nfo文件，里面是xml格式的，保存了这个视频文件的基本信息，其中有一个字段保存了这个视频文件对应的封面文件，
所以，修改当前的脚本，若视频文件匹配到了封面的文件，则修改对应nfo文件中的封面文件字段；若nfo文件不存在，则模拟生成一个。记得将nfo文件格式化一下，便于人类阅读理解
```